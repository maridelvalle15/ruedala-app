{% extends "administrador/base_admin.html" %}
{% load static %}
{% load humanize %}
{% block title %}<title>Comercios Registrados</title>{% endblock title %}
{% block extracss %}
<link href="{% static 'plugins/datatables/dataTables.bootstrap.css' %}" rel="stylesheet">
<style type="text/css">
	.box {
        border-top: 3px solid #F3F3F3 !important;
        border-left: 2px solid #F3F3F3 !important;
        border-right: 2px solid #F3F3F3 !important;
        border-bottom: 2px solid #F3F3F3 !important;
    }
</style>
{% endblock extracss %}

{% block content %}

<div class="row">
	<div class="col-xs-12" style="padding-right: 2%;">
		<div class="box box-default color-palette-box">
			<div class="box-header">
				<h3 class="box-title">Comercios Registrados</h3>

			<div class="box-header">
				<h3 class="box-title">Solicitudes de POS</h3>
			</div>
			<div class="box-body" style="overflow-x:auto;">
			  <table id="example1" class="table table-bordered table-striped dataTable" role="grid" aria-describedby="example1_info">
			    <thead>
				    <tr>
				    	<th>Nombre Comercial</th>
				    	<th>Razón Social</th>
			            <th>Teléfono Principal</th>
			            <th>Correo Electrónico</th>
			            <th>Representante Legal</th>
				    </tr>
			    </thead>
			    <tbody>
			    {% for cotizacion in cotizaciones_pos %}
			    	<tr role="row">
				      <td> {{ cotizacion.nombre }}</td>
				      <td> {{ cotizacion.razon }}</td>
				      <td> {{ cotizacion.telefono1 }}</td>
				      <td> {{ cotizacion.email }}</td>
				      <td> {{ cotizacion.nombre_rl }} {{ cotizacion.apellido_rl }}</td>
			            
				      <td><a href="{% url 'cotizaciones_details' cotizacion.pk %}">Ver</a></td>
				      
				      <td>
						<div class="btn-group">
							{% if cotizacion.status == None %}
		                  	  	<button type="button" class="btn btn-default">Status</button>
		                  	{% else %}
		                  		<button type="button" class="btn btn-default">{{cotizacion.status}}</button>
		                  	{% endif %}
		                  	  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
			                    <span class="caret"></span>
			                    <span class="sr-only">Toggle Dropdown</span>
			                  </button>
		                  <ul class="dropdown-menu" role="menu">
		                  	{% if cotizacion.status == 'Rechazado' %}
		                  	<li><a><i class="fa fa-times-circle" style="color: red;">  No hay acción disponible</i></a></li>
		                  	{% elif cotizacion.status == None %}
		                    <li><a href="{% url 'cambiar-status' cotizacion.pk 0 %}"><i class="fa fa-check-circle" style="color: gray;">  Recibido</i></a></li>
		                    {% elif cotizacion.status == 'Recibido' %}
		                    <li><a href="{% url 'cambiar-status' cotizacion.pk 1 %}"><i class="fa fa-check-circle" style="color: gray;">  Preaprobado</i></a></li>
		                    <li><a href="{% url 'cambiar-status' cotizacion.pk 2 %}"><i class="fa fa-times-circle" style="color: red;">  Rechazado</i></a></li>
		                    {% elif cotizacion.status == 'Preaprobado' %}
		                    <li><a href="{% url 'cambiar-status' cotizacion.pk 3 %}"><i class="fa fa-check-circle" style="color: gray;">  En visita</i></a></li>
		                    {% elif cotizacion.status == 'En visita' %}
		                    <li><a href="{% url 'cambiar-status' cotizacion.pk 4 %}"><i class="fa fa-check-circle" style="color: gray;">  Documentos por enviar</i></a></li>
		                    {% elif cotizacion.status == 'Documentos por enviar' %}
		                    <li><a href="{% url 'cambiar-status' cotizacion.pk 5 %}"><i class="fa fa-check-circle" style="color: green;">  Aprobado</i></a></li>
		                    {% elif cotizacion.status == 'Aprobado' %}
		                    <li><a><i class="fa fa-check-circle" style="color: green;">  Proceso finalizado</i></a></li>
		                    {% endif %}
		                  </ul>
		                </div>
				      </td>

				    </tr>
			    {% endfor %}
			    </tbody>
			    <tfoot>
			    </tfoot>
			  </table>
			</div>
		</div>
	</div>
</div>
{% endblock content %}

{% block custom_script %}
<script>
	$(document).ready(function(){
		$(function () {
	    	$("#example1").DataTable();
	    });
	});
</script>

{% endblock custom_script %}

